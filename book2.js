(function(d){'use strict';var version='1.1',key='a4cec2d1818bc8fa71cab7fd58204c25',frame_id='regiondo-booking-widget2',frame_cart_id='regiondo-cart-iframe',frame_initial_width='338',frame_initial_height='300',frame_minimal_width='200',frame_checkout_width='900',frame_checkout_height='500',sandbox='allow-same-origin allow-scripts allow-popups allow-forms allow-modals allow-popups-to-escape-sandbox';var script=d.getElementById('regiondo-booking-js');if(!script||script.hasAttribute('fired'))return false;script.setAttribute('fired','1');var css=d.getElementById('regiondo-button-css');if(!css){var head=d.getElementsByTagName('head')[0];var href=script.src.replace('regiondo-booking.js','regiondo-button.css');css=d.createElement('link');css.setAttribute('id','regiondo-button-css');css.setAttribute('type','text/css');css.setAttribute('rel','stylesheet');css.setAttribute('href',href);head.appendChild(css);}var iframe=null;(function wait(){if(d.readyState==='complete'){iframe=d.getElementById(frame_id);init();setTimeout(sendGaClientId,500);}else{setTimeout(wait,400);}})();function init(){if(!iframe||iframe.hasAttribute('data-processed'))return false;iframe.setAttribute('data-processed','1');iframe.setAttribute('sandbox',sandbox);iframe.setAttribute('style','margin:0;pading:0;border:0;background:transparent;overflow:hidden;'+iframe.getAttribute('style'));iframe.setAttribute('frameborder','0');iframe.frameBorder='0';var width=iframe.hasAttribute('data-width')?iframe.getAttribute('data-width'):frame_initial_width;var height=iframe.hasAttribute('data-height')?iframe.getAttribute('data-height'):frame_initial_height;iframe.style.width=width.match('%')?width:parseInt(width)+'px';iframe.style.height=height.match('%')?height:parseInt(height)+'px';var url=iframe.getAttribute('data-url');if(url.indexOf('bookingwidget=1')===-1)url=url+(url.indexOf('?')!==-1?'&':'?')+'bookingwidget=1';if(url.indexOf('http://')===-1&&url.indexOf('https://')===-1)url='https:'+url;if(url.indexOf('https://')!==-1)url=url+'&secure=1';iframe.setAttribute('src',url);}function initCartButton(el){if(window.addEventListener){el.addEventListener('click',function(e){cartClick(this,e);},false);}else if(window.attachEvent){el.attachEvent('onclick',function(e){cartClick(this,e);});}}function cartClick(button,e){e=e||window.event;if(e.preventDefault)e.preventDefault();var data_url=script.getAttribute('data-url');if(!data_url)return false;var html='<iframe id="'+frame_cart_id+'" src="'+data_url+'checkout/cart/" style="width:100%;height:100%;margin:0;pading:0;border:0;background:#fff;overflow:hidden;" frameborder="0" resizable="1" sandbox="'+sandbox+'"></iframe>';var width=frame_checkout_width+'px';var height=frame_checkout_height+'px';rmodal.open({content:html,width:width,height:height});return false;}function receive(e){var re=new RegExp('^'+key);if(typeof JSON==='undefined'||typeof e.data!=='string'||!re.test(e.data))return;var message=JSON.parse(e.data.replace(re,''));var iframe=document.getElementById(frame_id);if(iframe){setTimeout(sendGaClientId,1200);}if(typeof message.style!='undefined'){var width=message.style.width,height=message.style.height;if(rmodal&&rmodal.isVisible()){if(typeof message.area!='undefined'&&message.area=='checkout')rmodal.setWidth(frame_checkout_width);rmodal.resize({'width':width,'height':height});return;}else if(iframe){iframe.style.height=parseInt(height)+'px';}return;}if(typeof message.cart!='undefined'&&cart&&script.getAttribute('data-cart-show')=='true'){var price=message.cart.price,qty=message.cart.qty;cart.show(price,qty);return;}if(typeof message.resendurl!='undefined'){resendBackUrl();return;}}var gaSent=false;function sendGaClientId(){try{var iframe=document.getElementById(frame_id);if(gaSent||!iframe){setTimeout(sendGaClientId,500);return;}if(typeof ga!="undefined"){gaSent=true;iframe.contentWindow.postMessage("gaEvent",'*')
ga(function(tracker){var clientId=tracker.get('clientId');if(clientId)iframe.contentWindow.postMessage("RGAclientID"+clientId,'*');});}}catch(e){}}function resendBackUrl(){iframe=d.getElementById(frame_id);if(!iframe)return;var url=iframe.getAttribute('data-url');if(url.indexOf('bookingwidget=1')===-1)url=url+(url.indexOf('?')!==-1?'&':'?')+'bookingwidget=1';if(url.indexOf('http://')===-1&&url.indexOf('https://')===-1)url='https:'+url;if(url.indexOf('https://')!==-1)url=url+'&secure=1';var message={url:url};iframe.contentWindow.postMessage(key+JSON.stringify(message),'*');}var rmodal=(function(){var method={},settings={},overlay=d.createElement('div'),modal=d.createElement('div'),modalHeader=d.createElement('div'),modalContent=d.createElement('div'),modalClose=d.createElement('div'),visible=false,defaults={width:'auto',height:'auto',lock:true,hideClose:false,openCallback:false,closeCallback:false};if(!d.getElementById('regiondo-modal')){overlay.setAttribute('id','regiondo-overlay');modal.setAttribute('id','regiondo-modal');modalHeader.setAttribute('id','regiondo-modal-header');modalContent.setAttribute('id','regiondo-modal-content');modalClose.setAttribute('id','regiondo-modal-close');modal.appendChild(modalClose);modal.appendChild(modalHeader);modal.appendChild(modalContent);overlay.style.visibility='hidden';modal.style.visibility='hidden';visible=false;d.body.appendChild(overlay);d.body.appendChild(modal);}else{overlay=d.getElementById('regiondo-overlay');modal=d.getElementById('regiondo-modal');modalHeader=d.getElementById('regiondo-modal-header');modalContent=d.getElementById('regiondo-modal-content');modalClose=d.getElementById('regiondo-modal-close');};method.open=function(options){settings.width=parseInt(options.width||defaults.width);settings.height=parseInt(options.height||defaults.height);settings.maxWidth=0;settings.lock=options.lock||defaults.lock;settings.hideClose=options.hideClose||defaults.hideClose;settings.openCallback=options.openCallback||defaults.openCallback;settings.closeCallback=options.closeCallback||defaults.closeCallback;modalContent.innerHTML=options.content||'';modal.style.width=settings.width+'px';modal.style.height=settings.height+'px';modal.style.minWidth=parseInt(frame_minimal_width)+'px';if(options.header){modalHeader.innerHTML=options.header;modalHeader.style.display='block';}else{modalHeader.style.display='none';}if(settings.hideClose){modalClose.style.display='none';}else{modalClose.style.display='block';}modalClose.onclick=function(){if(!settings.hideClose)method.close();return false;};overlay.onclick=function(){if(!settings.lock)method.close();return false;};method.center({});overlay.style.visibility='visible';modal.style.visibility='visible';visible=true;if(window.addEventListener){window.addEventListener('resize',recenter,false);}else if(window.attachEvent){window.attachEvent('onresize',recenter);}if(settings.openCallback)settings.openCallback();};method.close=function(){modalContent.innerHTML='';overlay.setAttribute('style','');overlay.style.cssText='';overlay.style.visibility='hidden';modal.setAttribute('style','');modal.style.cssText='';modal.style.visibility='hidden';modalClose.setAttribute('style','');modalClose.style.cssText='';visible=false;if(window.removeEventListener){window.removeEventListener('resize',recenter,false);}else if(window.detachEvent){window.detachEvent('onresize',recenter);}if(settings.closeCallback)settings.closeCallback();};method.setWidth=function(width){modal.style.width=parseInt(width)+'px';settings.width=parseInt(width);}
method.resize=function(options){var changed=false;if(parseInt(modal.style.width)!=parseInt(options.width)){modal.style.width=options.width+'px';changed=true;}if(parseInt(modal.style.height)!=parseInt(options.height)){modal.style.height=options.height+'px';changed=true;}if(changed)setTimeout(function(){method.center({});},10);};method.center=function(options){var docEl=d.documentElement,documentHeight=Math.max(d.body.scrollHeight,docEl.scrollHeight),modW=Math.max(modal.clientWidth,modal.offsetWidth),modH=Math.max(modal.clientHeight,modal.offsetHeight),winW=0,winH=0,scrollX=0,scrollY=0;if(typeof(window.innerWidth)==='number'){winW=window.innerWidth;winH=window.innerHeight;}else if(docEl&&docEl.clientWidth){winW=docEl.clientWidth;winH=docEl.clientHeight;}if(typeof(window.pageYOffset)==='number'){scrollX=window.pageXOffset;scrollY=window.pageYOffset;}else if(d.body&&d.body.scrollLeft){scrollX=d.body.scrollLeft;scrollY=d.body.scrollTop;}else if(docEl&&docEl.scrollLeft){scrollX=docEl.scrollLeft;scrollY=docEl.scrollTop;}if(modW+24>=winW){modal.style.left=scrollX+0+'px';}else{modal.style.left=scrollX+(winW/2)-(modW/2)+'px';}if(modH+24>=winH){modal.style.top=scrollY+10+'px';}else{modal.style.top=scrollY+(winH/2)-(modH/2)+'px';}overlay.style.width='100%';overlay.style.height='100%';if(navigator.appVersion.indexOf('MSIE')==-1){if(modW>winW){modal.style.maxWidth='100%';}else{modal.style.maxWidth='auto';}if(modW<=parseInt(settings.width)){modal.style.width=parseInt(settings.width)+'px';}else{settings.maxWidth=Math.max(settings.maxWidth,modW);modal.style.width=parseInt(settings.maxWidth)+'px';}}else{if(modW<=parseInt(settings.width)){modal.style.width=parseInt(settings.width)+'px';}}};method.isVisible=function(){return visible;};var recenterTimeout=null;var recenter=function(){if(recenterTimeout)clearTimeout(recenterTimeout);recenterTimeout=setTimeout(function(){method.center({});},32);};return method;}());var cart=(function(){var method={},settings={price:'',qty:'',text:'',icon:'',font:'bold 14px/1 "PT Sans","Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif',size:'',color:'#fff',background:'#78d28c',position:'bottom-right'};method.init=function(){var cartButton=d.createElement('div'),cartBox=d.createElement('div'),cartIcon=d.createElement('img'),cartPrice=d.createElement('span'),cartQty=d.createElement('span'),cartText=d.createElement('span');cartButton.setAttribute('id','regiondo-cart-button');cartBox.setAttribute('id','regiondo-cart-box');cartIcon.setAttribute('id','regiondo-cart-icon');cartPrice.setAttribute('id','regiondo-cart-price');cartQty.setAttribute('id','regiondo-cart-qty');cartText.setAttribute('id','regiondo-cart-text');for(var option in settings){if(!settings.hasOwnProperty(option))continue;if(script.hasAttribute('data-cart-'+option))settings[option]=script.getAttribute('data-cart-'+option);}if(settings.icon!='false'&&settings.icon!=''){cartIcon.src=settings.icon;cartBox.appendChild(cartIcon);}if(settings.price=='true'){cartBox.appendChild(cartPrice);}if(settings.qty=='true'){cartBox.appendChild(cartQty);}if(settings.text!='false'&&settings.text!=''){cartText.innerHTML=settings.text;cartBox.appendChild(cartText);}cartBox.style.background=settings.background;cartBox.style.color=settings.color;cartBox.style.font=settings.font;cartButton.className+=' '+settings.position;cartButton.className+=' '+settings.size;cartButton.style.visibility='hidden';cartButton.appendChild(cartBox);if(!d.getElementById('cart-button-preview-holder')){d.body.appendChild(cartButton);}else{d.getElementById('cart-button-preview-holder').appendChild(cartButton);}initCartButton(cartButton);};method.show=function(price,qty){if(!d.getElementById('regiondo-cart-button'))method.init();var cartButton=d.getElementById('regiondo-cart-button'),cartIcon=d.getElementById('regiondo-cart-icon'),cartPrice=d.getElementById('regiondo-cart-price'),cartQty=d.getElementById('regiondo-cart-qty'),cartText=d.getElementById('regiondo-cart-text');if(price&&cartPrice)cartPrice.innerHTML=price;if(qty&&cartQty)cartQty.innerHTML=qty;if(cartIcon||cartPrice||cartQty||cartText){cartButton.style.visibility='visible';}};method.hide=function(){var cartButton=d.getElementById('regiondo-cart-button');cartButton.style.visibility='hidden';};return method;}());if(window.addEventListener){removeEventListener('message',receive,false);addEventListener('message',receive,false);}else if(window.attachEvent){detachEvent('onmessage',receive);attachEvent('onmessage',receive);}if(script.getAttribute('data-cart-show')=='true'||d.getElementById('cart-button-preview-holder')){if(script.getAttribute('data-cart-price')=='true'||script.getAttribute('data-cart-qty')=='true'){var body=d.getElementsByTagName('body')[0],div=d.createElement('div'),data_url=script.getAttribute('data-url');if(data_url){var html='<iframe src="'+data_url+'whitelabel/cart/" style="width:1px;height:1px;margin:0;pading:0;border:0;overflow:hidden;visibility:hidden;position:absolute;" frameborder="0" resizable="0" sandbox="'+sandbox+'"></iframe>';if(html){div.setAttribute('id','regiondo-cart-data');div.style.position='absolute';div.style.visibility='hidden';body.appendChild(div);div.innerHTML=html;}};}else{cart.show();}if(d.getElementById('cart-button-preview-holder'))window.rmodal=rmodal;}if(script.hasAttribute('data-cart-button-id')){var cart_button=d.getElementById(script.getAttribute('data-cart-button-id'));if(cart_button)initCartButton(cart_button);}}(document));
